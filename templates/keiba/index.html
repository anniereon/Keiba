{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>機械学習INPUTデータ作成</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <script src="{% static 'js/feature.js' %}"></script>
</head>
<body>
  <h1>機械学習INPUTデータ作成</h1>
  <div class="form-container">
    <form method="post" action="">
      {% csrf_token %}
      <input type="hidden" name="action" value="export">
      <fieldset>
        <legend>機械学習INPUTデータ作成</legend>
        <label>
          期間：
          {{ feature_form.start_date }} から {{ feature_form.end_date }} まで
        </label><br><br>
        <label>
          頭数：
          {{ feature_form.num_horses }}
        </label><br><br>
        <div>
          <button type="button" onclick="addFeatureRow()">追加</button>
          <button type="button" onclick="deleteSelectedRows()">削除</button>
          <button type="submit">実行</button>
        </div><br>
        <div id="feature-container" style="margin-bottom: 10px;"></div>
      </fieldset>
    </form>
    <form method="post" action="">
      {% csrf_token %}
      <input type="hidden" name="action" value="aggregate">
      <fieldset>
        <legend>勝率統計作成</legend>
        <label>
          期間：
          {{ stats_form.start_date }} から {{ stats_form.end_date }} まで
        </label><br>
        <button type="submit">実行</button>
      </fieldset>
    </form>
  </div>
  {% if result %}
    <p>集計結果（{{ result.sample_size }} 件）を保存しました。</p>
  {% endif %}
</body>
</html>
